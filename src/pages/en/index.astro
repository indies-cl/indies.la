---
import Layout from "../../layouts/Layout.astro";
import { HomePage } from "../../components/pages/HomePage";
import i18n from "../../i18n/config";
import { type Language } from "../../utils/language";
import { getLatestEvents } from "../../lib/events";

const lang = (Astro.currentLocale ?? "en") as Language;
i18n.changeLanguage(lang);
const t = i18n.getFixedT(lang);
const events = await getLatestEvents(6);
---

<Layout title={t("pageTitle")} description={t("metaDescription")}>
  <HomePage client:load lang={lang} events={events} />
</Layout>
